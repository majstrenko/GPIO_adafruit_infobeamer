#!/usr/bin/python2.7
from hosted import device, node, config, time
config.restart_on_update()

device.gpio.monitor(config.pin)
for pin, state in device.gpio.poll_forever():
    node.send('/state:%d' % state)
    print("pin touched")
    time.sleep(1)
    device.gpio.setup_pin(21, direction="out")
    time.sleep(20)
    device.gpio.set_pin_value(21,  high=True)
